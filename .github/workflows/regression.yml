name: Regression
run-name: ${{ github.actor }} ðŸš€ - Regression

on:
  push:
  schedule:
    - cron: '0 10 * * 1-5'
    - cron: '0 12 * * 1-5'
  workflow_dispatch:
    inputs:
      ADMIN_USERNAME:
        required: true
        default: user2
        type: string
      PASSWORD:
        required: true
        default: abc2
        type: string
#      SERVICE_SET:
#        required: true
#        default: 'E.x: abc'
#        type: string
#      TESTING_HOST:
#        required: true
#        default: 'E.x: https://abc.com'
#        type: string
#      GAROON_BRANCH_NAME:
#        required: true
#        type: string
#      ARCHIVE_FOLDER:
#        required: false
#        default: 'E.x: 1234'
#        description: 'ARCHIVE_FOLDER (Input if you want to use a specific archive)'
#        type: string
#      GAROON_ARCHIVE:
#        required: false
#        default: 'E.x: 12344'
#        description: 'GAROON_ARCHIVE (Input if you want to use a specific archive)'
#        type: string
#      GAROON_TYPE:
#        required: true
#        type: choice
#        options:
#          - 'Cloud'
#          - 'Large Scale Linux'
#          - 'Normal Linux'
#          - 'Normal Windows'
#      IS_SET_UP_MAIL_ACCOUNT:
#        required: true
#        default: true
#        type: boolean
#      IS_CREATE_MAIL_FOLDER:
#        required: true
#        default: true
#        type: boolean
#      force_recreate_service_set:
#        required: true
#        default: true
#        type: boolean

jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Get Environment Variables
        uses: actions/github-script@v6
        with:
          script: |
            const envInfo = require("./.github/workflows/schedule.json");
            const commonInfo = envInfo.common;
            
            core.exportVariable("ADMIN_USERNAME", commonInfo.ADMIN_USERNAME);
            core.exportVariable("PASSWORD", commonInfo.PASSWORD);
      - name: Update Environment Variables From Manual Trigger
        if: github.event_name == 'workflow_dispatch'
        uses: actions/github-script@v6
        with:
          script: |
            core.exportVariable('ADMIN_USERNAME', "${{ github.event.inputs.ADMIN_USERNAME }}");
            core.exportVariable('ADMIN_USERNAME', "${{ github.event.inputs.PASSWORD }}");
      - name: Sprint Env
        run: |
          echo "${{ env.ADMIN_USERNAME }}"
          echo "${{ env.PASSWORD }}"
